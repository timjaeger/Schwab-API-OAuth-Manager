{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="mt-5">Schwab OAuth App</h1>
    {% if 'logged_in' in session and session['logged_in'] %}
        <p>You are logged in.</p>
        <a href="{{ url_for('test_refresh') }}" class="btn btn-primary">Test Token Refresh</a>
        <a href="{{ url_for('protected') }}" class="btn btn-secondary">Access Protected Route</a>
        <a href="{{ url_for('logout') }}" class="btn btn-danger">Logout</a>
    {% else %}
        <p>Welcome! Please log in to access the Schwab OAuth App.</p>
        <a href="{{ url_for('login') }}" class="btn btn-primary">Login</a>
    {% endif %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log("DOM fully loaded");
    const loginButton = document.querySelector('a[href="{{ url_for("login") }}"]');
    console.log("Login button:", loginButton);
});
</script>
{% endblock %}
