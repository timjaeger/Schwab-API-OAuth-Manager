{% extends "base.html" %}

{% block content %}
<div class="jumbotron">
    <h1 class="display-4">Welcome to Schwab OAuth App</h1>
    <p class="lead">This application demonstrates OAuth 2.0 authentication with Schwab's API.</p>
    {% if 'access_token' not in session %}
        <a href="{{ url_for('login') }}" class="btn btn-primary btn-lg" target="_blank">Login with Schwab</a>
        
        <form action="{{ url_for('process_redirect') }}" method="post" class="mt-3">
            <div class="input-group">
                <input type="text" class="form-control" id="redirect_url" name="redirect_url" placeholder="Enter Redirect URL" required>
                <button type="submit" class="btn btn-secondary">Submit</button>
            </div>
        </form>
    {% else %}
        <a href="{{ url_for('profile') }}" class="btn btn-secondary btn-lg">View Profile</a>
        <a href="{{ url_for('test_refresh') }}" class="btn btn-info btn-lg mt-2">Test Token Refresh</a>
    {% endif %}
</div>
{% endblock %}
